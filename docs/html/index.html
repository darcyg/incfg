<!-- HTML header for doxygen 1.8.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <!-- For Mobile Devices -->
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
        <meta name="generator" content="Doxygen 1.8.10"/>
        <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
        <title>incfg: incfg</title>
        <!--<link href="tabs.css" rel="stylesheet" type="text/css"/>-->
        <script type="text/javascript" src="dynsections.js"></script>
        <link href="doxygen.css" rel="stylesheet" type="text/css" />
        <link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.5/yeti/bootstrap.min.css">
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
        <script type="text/javascript" src="doxy-boot.js"></script>
    </head>
    <body>
        <nav class="navbar navbar-default" role="navigation">
            <div class="container">
                <div class="navbar-header">
                    <a class="navbar-brand">incfg  - Inline C++ configuration options </a>
                </div>
            </div>
        </nav>
        <div id="top"><!-- do not remove this div, it is closed by doxygen! -->
            <div class="content" id="content">
                <div class="container">
                    <div class="row">
                        <div class="col-sm-12 panel panel-default" style="padding-bottom: 15px;">
                            <div style="margin-bottom: 15px;">
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">incfg </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>incfg is a small C++ library to easily manage program configuration options (aka. command line arguments, program options, etc).</p>
<p>incfg handles configuration options simply as key-value pairs whose keys are defined and checked at compile time and values are gathered automatically just before the program starts (ie. before the execution of <code>main()</code>).</p>
<p>Once defined, the presence and type of a key-value pair is guaranteed at compile time so that it can be used throughout the code with minimal effort. (See Usage Example below for a quick start).</p>
<p>Configuration values can be loaded from a "configuration string" like:</p>
<div class="fragment"><div class="line">key1 = value1</div>
<div class="line">key2 = value2</div>
<div class="line">....</div>
<div class="line">keyN = valueN</div>
</div><!-- fragment --><p>or via classic <code>argv, argc</code> command-line string arrays.</p>
<p>Type conversion (from a type <code>T</code> to/from <code>std::string</code>) is handled automatically via <code>std::stringstream</code> or can be extended easily for custom types.</p>
<h1>Usage Example</h1>
<p>Suppose that we have a function </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> logtofile( std::string log_data )</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// saves log_data to a file...</span></div>
<div class="line">    <span class="comment">// ....</span></div>
<div class="line">}</div>
</div><!-- fragment --><p>in which we foresee to use 3 configuration options:</p>
<ul>
<li>An <code>unsigned int BUFFER_SIZE</code> option for the file copy algorithm (default value 4096)</li>
<li>A <code>bool DEBUG_LOG</code> option to enable/disable debug logging (default value <code>false</code>)</li>
<li>A <code>std::string LOGFILENAME</code> option to specify the log file name (default value <code>"log.txt"</code>)</li>
</ul>
<p>We start by declaring the options we need <em>before</em> the function definition:</p>
<div class="fragment"><div class="line"><a class="code" href="incfg_8hpp.html#a54d733d2153c53cbacecc9eb1b8e3164">INCFG_REQUIRE</a>( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>, BUFFER_SIZE, 4096, <span class="stringliteral">&quot;Buffer size used to write the log file&quot;</span> )</div>
<div class="line"><a class="code" href="incfg_8hpp.html#a54d733d2153c53cbacecc9eb1b8e3164">INCFG_REQUIRE</a>( <span class="keywordtype">bool</span>, DEBUG_LOG, false, &quot;Enable verbose debug&quot; )</div>
<div class="line"><a class="code" href="incfg_8hpp.html#a54d733d2153c53cbacecc9eb1b8e3164">INCFG_REQUIRE</a>( std::<span class="keywordtype">string</span>, LOGFILENAME, &quot;log.txt&quot;, &quot;Default log filename&quot; )</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> logtofile( std::<span class="keywordtype">string</span> log_data )</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// saves log_data to a file...</span></div>
<div class="line">    <span class="comment">// ....</span></div>
<div class="line">}</div>
</div><!-- fragment --><p>The <code><a class="el" href="incfg_8hpp.html#a54d733d2153c53cbacecc9eb1b8e3164" title="Globally declares that a configuration key-value pair is required. ">INCFG_REQUIRE()</a></code> macro registers a new configuration option by specifying:</p><ol type="1">
<li>A type</li>
<li>A name (the key)</li>
<li>A default value (must be castable to the type specified before)</li>
<li>A string describing the configuration option (Used to generate the configuration string/file automatically)</li>
</ol>
<p>At this point, options can be freely (and safely!) retrieved inside the function body:</p>
<div class="fragment"><div class="line"><a class="code" href="incfg_8hpp.html#a54d733d2153c53cbacecc9eb1b8e3164">INCFG_REQUIRE</a>( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>, BUFFER_SIZE, 4096, <span class="stringliteral">&quot;Buffer size used to write the log file&quot;</span> )</div>
<div class="line"><a class="code" href="incfg_8hpp.html#a54d733d2153c53cbacecc9eb1b8e3164">INCFG_REQUIRE</a>( <span class="keywordtype">bool</span>, DEBUG_LOG, false, &quot;Enable verbose debug&quot; )</div>
<div class="line"><a class="code" href="incfg_8hpp.html#a54d733d2153c53cbacecc9eb1b8e3164">INCFG_REQUIRE</a>( std::<span class="keywordtype">string</span>, LOGFILENAME, &quot;log.txt&quot;, &quot;Default log filename&quot; )</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> logtofile( std::<span class="keywordtype">string</span> log_data )</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">char</span>* buff = <span class="keyword">new</span> <span class="keywordtype">char</span>[ <a class="code" href="incfg_8hpp.html#a432d4a1aa6729a763214a3186ff6e312">INCFG_GET</a>( BUFFER_SIZE ) ];</div>
<div class="line"></div>
<div class="line">    std::string filename = <a class="code" href="incfg_8hpp.html#a432d4a1aa6729a763214a3186ff6e312">INCFG_GET</a>( LOGFILENAME );</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span>( <a class="code" href="incfg_8hpp.html#a432d4a1aa6729a763214a3186ff6e312">INCFG_GET</a>( DEBUG_LOG ) )</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// do some debug</span></div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">// ...</span></div>
<div class="line">}</div>
</div><!-- fragment --><p>Each time <code><a class="el" href="incfg_8hpp.html#a432d4a1aa6729a763214a3186ff6e312">INCFG_GET()</a></code> macro is used, the existence of the requested key is guaranteed with a value that can be either its default value or something else (if the associated value changed during the program execution).</p>
<h2>Loading configuration options from a string (or file)</h2>
<p>One of the key features of incfg is that the list of configuration options is known before the program execution. As a consequence, a configuration string can be automatically generated with all the options required by the program. The <code><a class="el" href="classincfg_1_1_config_options.html" title="ConfigOptions Class collects and manages all the required key-value pairs. ">incfg::ConfigOptions</a></code> singleton class is used to manage the options list. For example, to generate a configuration string (that can be optionally saved to a file)</p>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> main()</div>
<div class="line">{</div>
<div class="line">    std::string cfg = <a class="code" href="classincfg_1_1_config_options.html#ae1a04cd15a0741abcdecfa6771b79401">incfg::ConfigOptions::instance</a>().<a class="code" href="classincfg_1_1_config_options.html#aa258bd2a346f920c1c03722915db7f4e">to_config_string</a>();</div>
<div class="line">    std::ofstream ofs( <span class="stringliteral">&quot;config.txt&quot;</span> );</div>
<div class="line">    ofs &lt;&lt; cfg;</div>
<div class="line">    ofs.close();</div>
<div class="line">}</div>
</div><!-- fragment --><p>With the options defined before, the following <code>config.txt</code> will be generated:</p>
<div class="fragment"><div class="line"><span class="preprocessor"># Buffer size used to write the log file</span></div>
<div class="line"><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor">#BUFFER_SIZE=4096</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor"># Enable verbose debug</span></div>
<div class="line"><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor">#DEBUG_LOG=false</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor"># Default log filename</span></div>
<div class="line"><span class="preprocessor">#</span></div>
<div class="line"><span class="preprocessor">#LOGFILENAME=&quot;log.txt&quot;</span></div>
</div><!-- fragment --><p>As you may expect, the same <code><a class="el" href="classincfg_1_1_config_options.html" title="ConfigOptions Class collects and manages all the required key-value pairs. ">incfg::ConfigOptions</a></code> singleton can be used to load config options values from a configuration string:</p>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> main()</div>
<div class="line">{</div>
<div class="line">    std::ifstream ifs( <span class="stringliteral">&quot;config.txt&quot;</span> );</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">try</span></div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="classincfg_1_1_config_options.html#ae1a04cd15a0741abcdecfa6771b79401">incfg::ConfigOptions::instance</a>().<a class="code" href="classincfg_1_1_config_options.html#a54182a98f6753af09d2f0cccb98a523a">load</a>( ifs );</div>
<div class="line"></div>
<div class="line">    } <span class="keywordflow">catch</span>( std::runtime_error&amp; er )</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// An exception is thrown if the configuration string/file cannot be parsed</span></div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><h2>Loading configuration options from command-line</h2>
<p>Configuration options can be loaded from command-line by passing the command line options given in <code>argc</code> and <code>argv</code>:</p>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> main( <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>* argv[] )</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">try</span></div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="classincfg_1_1_config_options.html#ae1a04cd15a0741abcdecfa6771b79401">incfg::ConfigOptions::instance</a>().<a class="code" href="classincfg_1_1_config_options.html#a54182a98f6753af09d2f0cccb98a523a">load</a>( argc, argv );</div>
<div class="line"></div>
<div class="line">    } <span class="keywordflow">catch</span>( std::runtime_error&amp; er )</div>
<div class="line">    {</div>
<div class="line">        std::cout &lt;&lt; <span class="stringliteral">&quot;Error: &quot;</span> &lt;&lt; er.what() &lt;&lt; std::endl;</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><p>Each option key is prepended by a double dash and followed by its value. For the example given before, a correct command line would be:</p>
<div class="fragment"><div class="line">$ yourprogramname --BUFFER_SIZE 1024 --DEBUG_LOG --LOGFILENAME test.txt</div>
</div><!-- fragment --><h2>Customizing configuration option types</h2>
<p>Each configuration option is saved/loaded as a string. By default the conversion between an option type and a string is handled by <code>std::stringstream</code> but uncommon types can be handled as well by defining the two template functions:</p>
<div class="fragment"><div class="line"><span class="keyword">namespace </span><a class="code" href="namespaceincfg.html">incfg</a></div>
<div class="line">{</div>
<div class="line">    <span class="keyword">template</span> &lt;  &gt;</div>
<div class="line">    <span class="keyword">inline</span> std::string to_string_helper&lt; T &gt;( T val )</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// return an std::string representation of T</span></div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keyword">template</span> &lt; &gt;</div>
<div class="line">    <span class="keyword">inline</span> T <a class="code" href="namespaceincfg.html#a84d905ab6f88182f586c24fd2bcc014e">from_string_helper</a>( std::string str, <span class="keyword">const</span> T&amp; mytype )</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// parse and return T from its string representation str</span></div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><h1>Installing</h1>
<p>Just import <code><a class="el" href="incfg_8hpp.html" title="incfg hpp header ">incfg.hpp</a></code> and <code>incfg.cpp</code> in your project :)</p>
<h1>License</h1>
<p>The MIT License Copyright (c) 2015 Filippo Bergamasco</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:</p>
<p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</p>
<p>THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE. </p>
</div></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.8-->
<!-- start footer part -->
</div>
</div>
</div>
</div>
</div>
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.10
</small></address>
</body>
</html>
